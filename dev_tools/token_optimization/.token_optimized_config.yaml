# Token-Optimized Agent Configuration
# Ensures maximum token efficiency through automatic agent chaining

agent_pipeline:
  # Always use token-sage as primary analyzer
  primary_agent: "token-sage"

  # Always use HAL agents for preprocessing (0 tokens)
  preprocessing_agents:
    - "hal_token_savvy_agent"
    - "hal_agent_loop"

# Token optimization settings
optimization:
  # INCREASED: Maximum allowed tokens set to 40000 for enhanced capacity
  max_allowed_tokens: 40000

  # Local filtering limits (saves tokens) - Adaptive based on package size
  max_context_chars: 2000  # Increased from 1000 for better context
  max_files: 100  # Increased from 50 for comprehensive analysis
  max_bytes: 100000  # Increased from 50000 for larger files

  # Always enable caching
  cache_enabled: true
  delta_mode: true

  # Always use path abbreviation
  abbreviate_paths: true

  # Enhanced context lines for better analysis
  context_lines: 3  # Increased from 1 for better context

  # Package-specific adaptive limits
  package_limits:
    lib_package:
      max_files: 150  # Core library - highest limit
      max_context_chars: 3000
      context_lines: 5
    cli_package:
      max_files: 100  # CLI - moderate limit
      max_context_chars: 2000
      context_lines: 3
    web_package:
      max_files: 120  # Web app - higher limit
      max_context_chars: 2500
      context_lines: 4

# File patterns for analysis
include_patterns:
  - "*.py"
  - "*.md"
  - "*.yaml"
  - "*.yml"
  - "*.json"

# Caching configuration
cache:
  directory: "~/.token_optimized_cache"
  ttl: 86400  # 24 hours

# Usage examples
examples:
  - command: "python token_optimized_agent.py 'authentication system'"
    description: "Analyze authentication code with max token efficiency"
  - command: "python token_optimized_agent.py 'database models' 'class.*Model'"
    description: "Find database model classes with token optimization"
  - command: "python token_optimized_agent.py 'API endpoints' 'def.*route'"
    description: "Analyze API routes with local preprocessing"
