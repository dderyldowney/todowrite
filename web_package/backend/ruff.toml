# RUFF configuration for ToDoWrite Web Backend
# RUFF replaces: black, isort, flake8, bandit

# Line length
line-length = 88

# Target Python version
target-version = "py312"

# Exclude patterns
exclude = [
    ".git",
    "__pycache__",
    "build",
    "dist",
    ".venv",
    ".env",
    "*.egg-info",
]

# Per-file ignores
[lint.per-file-ignores]
# Tests can have longer lines and unused imports
"tests/**/*.py" = ["E501", "F401"]
# __init__.py files can have unused imports
"__init__.py" = ["F401"]

# Select rules and rules to ignore
[lint]
# Enable a wide range of rules
select = [
    # pycodestyle
    "E",
    # Pyflakes
    "F",
    # pyupgrade
    "UP",
    # flake8-bugbear
    "B",
    # flake8-simplify
    "SIM",
    # flake8-comprehensions
    "C4",
    # flake8-unused-arguments
    "ARG",
    # flake8-self
    "SLF",
    # flake8-implicit-str-concat
    "ISC",
    # flake8-return
    "RET",
    # flake8-import-conventions
    "ICN",
    # flake8-pie
    "PIE",
    # flake8-quotes
    "Q",
    # flake8-debugger
    "T10",
    # flake8-raise
    "RSE",
    # flake8-tidy-imports
    "TID",
    # flake8-type-checking
    "TCH",
    # flake8-executable
    "EXE",
    # Security rules (replaces bandit)
    "S",
]

ignore = [
    # Allow lines longer than 88 characters in some cases
    "E501",
    # Allow unused variables when they start with underscore
    "F841",
]

# Import sorting configuration
[lint.isort]
known-first-party = ["todowrite_web"]
known-third-party = ["fastapi", "sqlalchemy", "pydantic"]
split-on-trailing-comma = true

# Format configuration
[format]
# Use double quotes for strings
quote-style = "double"
# Use spaces for indentation
indent-style = "space"
# Line ending
line-ending = "auto"

# Security configuration (S rules replace bandit)
# Hardcoded passwords and weak crypto are checked by default S rules
